# AWS-Cloud-Solutions-Architect
My AWS Cloud Solutions Architect study notes

## Services

**EC2**  
Timeout isses => security groups configuration?  
Security groups can reference other security groups instead of ip ranges  
Public IP (obvious)  
* elastic IP (same as public IP, but consistent IP between stop and starts)
Private IP (obvious)  
   
* EC2 launch modes  
on demand  
reserved  
spot instances  
dedicated  
   
* Instance types:  
R = Ram  
C = CPU  
M = Medium  
I = IO  
G = GPU  
T2/T3 = Burst (or budget)  

* Amazon Machine Image (AMI)  
Create AMI to pre-install software on for EC2 => faster boot/deployment of instances  
AMI can be copeid across regions and accounts.  (default within region only)  
  
* Instance placement groups  
Cluster - close together, high performance (faster network), less redundancy  
Spread - spread among multi-AZ's, more redundancy  

**CLB / ALB / NLB**  
* CLB - may still have questions regarding security groups and stickiness  
  
* ALB  
Support routing based on hostname (users.example.com & payments.example.com)  
Support routing based on path (example.com/users & example.com/payments)  


Support redirets (HTTP to HTTPS as example)  
Support dynamic host port mapping with ECS  

* NLB (Layer 4) gets a static IP per AZ  
Public facing: must attach Elastic IP - can help whitelist by clients  
Private facing: will get random private IP base on free ones at time of creation  
Has cross zone balancing  
Has SSL termination (Jan 2019)  
  
*Restrict access to the EC2 instance by limiting security group source from the load balancer:*
![alt text](https://github.com/rlam13/AWS-Cloud-Solutions-Architect/blob/master/screenshots/load_balancer_security_groups.png)

* SSL Certificates on load balancer  
The load balancer uses a X.509 certificate (SSL/TLS server certificate)  
Manage certificates using AWS Certificate Manager (ACM)  
Alternatively create/upload own certificates
  
HTTPS listener:  
Must specify default certificate  
Optional - add list of certs to support multiple domains
Clients can use Server Name Indication (SNI) to specify the hostname they reach  
Able to specify security policy to support older versions of SSL/TLS (for legacy clients)  

  
**ASG**  
ASG Default Termination Policy:  
1. Find AZ with most instances
2. If multiple instances in AZ, delete the one with oldest launch configuration  
  
* Scaling cooldown  
Ensures that ASG doesn't launch/terminate instances before previous scaling activity  
In addition to default cooldown -> create cooldowns that apply to specific scaling policy  
Default cooldown period is 300 seconds, can reduce down to reduce scale-in policy  
If multiple scale out/in during an hours, modifty ASG cool-down timer and CloudWatch alarm period that triggers scale in  

**EBS**  
Local storage, can only be attached to one instance at a time (like a USB stick)
Locked at the AZ level  
* if you need to attach to another AZ, then backup (snapshot) and recreate in another AZ  
EBS backups use IO, don't run while application is handling lots of traffic  
Root EBS volumes get terminated by default if EC2 instance is terminated (can be disabled, if needed)  
Increase EBS volume size if disk I/O is high

**EFS**  
Network drive (file system) essentially
Can mount across lots of instances  
EFS share website files
EBS gp2, optimize cost

**Instance Store**
The volume on the instance.  Ephemeral (higher performance, but not portable/flexible like EBS/EFS)
Custom AMI for faster deploy  
  
**RDS**  
Read replicas can only SELECT (read-only), can't INSERT/DELETE/UPDATE  
Supports Transparent Data Encryption (TDE) for DB enryption
* Oracle or SQL server DB instance only  
* TDE can be used on top of KMS - may affect performance  
  
IAM Authentication (not userid/password)  
Works for MySQL, PostgreSQL  
Lifespan of authentication token is 15 minutes (short-lived)  
Tokens are generated by AWS credentials  
SSL must be used when connecting to DB  
Easy to use EC2 Instance roles to connect to the RDS database
  
**Aurora**
IAM Authentication for MySQL and PostgreSQL
Aurora Global DB span multipl regions and enable DR
* one primary region
* one DR region
* DR region can be used for lower latency reads
* < 1 second replica lag on average  
If not use Global DB, can create cross-region read replics
* FAQ recommends Global DB
  

